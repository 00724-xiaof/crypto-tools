import { useState } from 'react'
import { Button } from '@/components/ui/button'
import { Label } from '@/components/ui/label'
import { Textarea } from '@/components/ui/textarea'
import { Languages, Copy, Check, ArrowLeftRight } from 'lucide-react'

// 简繁对照表（常用字）
const SIMPLIFIED_TO_TRADITIONAL: Record<string, string> = {
  '爱': '愛', '碍': '礙', '袄': '襖', '坝': '壩', '板': '闆', '办': '辦', '帮': '幫', '宝': '寶',
  '报': '報', '币': '幣', '毕': '畢', '边': '邊', '变': '變', '标': '標', '表': '錶', '别': '彆',
  '宾': '賓', '补': '補', '才': '纔', '参': '參', '仓': '倉', '产': '產', '长': '長', '尝': '嘗',
  '厂': '廠', '车': '車', '彻': '徹', '尘': '塵', '陈': '陳', '衬': '襯', '称': '稱', '惩': '懲',
  '迟': '遲', '冲': '沖', '虫': '蟲', '丑': '醜', '出': '齣', '础': '礎', '处': '處', '触': '觸',
  '辞': '辭', '聪': '聰', '从': '從', '窜': '竄', '达': '達', '带': '帶', '担': '擔', '单': '單',
  '当': '當', '党': '黨', '导': '導', '灯': '燈', '邓': '鄧', '敌': '敵', '递': '遞', '点': '點',
  '电': '電', '垫': '墊', '淀': '澱', '调': '調', '叠': '疊', '钉': '釘', '东': '東', '动': '動',
  '栋': '棟', '冻': '凍', '斗': '鬥', '独': '獨', '读': '讀', '赌': '賭', '断': '斷', '对': '對',
  '队': '隊', '吨': '噸', '夺': '奪', '堕': '墮', '儿': '兒', '尔': '爾', '发': '發', '范': '範',
  '飞': '飛', '坟': '墳', '奋': '奮', '粪': '糞', '丰': '豐', '风': '風', '凤': '鳳', '肤': '膚',
  '妇': '婦', '复': '復', '盖': '蓋', '干': '幹', '赶': '趕', '个': '個', '巩': '鞏', '沟': '溝',
  '构': '構', '购': '購', '谷': '穀', '顾': '顧', '刮': '颳', '关': '關', '观': '觀', '惯': '慣',
  '广': '廣', '归': '歸', '龟': '龜', '国': '國', '过': '過', '韩': '韓', '汉': '漢', '号': '號',
  '合': '閤', '轰': '轟', '后': '後', '胡': '鬍', '护': '護', '划': '劃', '华': '華', '画': '畫',
  '话': '話', '怀': '懷', '坏': '壞', '欢': '歡', '环': '環', '还': '還', '换': '換', '黄': '黃',
  '汇': '匯', '会': '會', '秽': '穢', '获': '獲', '击': '擊', '鸡': '雞', '积': '積', '极': '極',
  '际': '際', '继': '繼', '家': '傢', '价': '價', '驾': '駕', '坚': '堅', '歼': '殲', '监': '監',
  '见': '見', '舰': '艦', '剑': '劍', '将': '將', '浆': '漿', '奖': '獎', '讲': '講', '酱': '醬',
  '胶': '膠', '阶': '階', '节': '節', '杰': '傑', '洁': '潔', '结': '結', '姐': '姊', '届': '屆',
  '紧': '緊', '仅': '僅', '进': '進', '惊': '驚', '经': '經', '净': '淨', '竞': '競', '旧': '舊',
  '举': '舉', '剧': '劇', '据': '據', '惧': '懼', '卷': '捲', '决': '決', '绝': '絕', '军': '軍',
  '开': '開', '凯': '凱', '颗': '顆', '壳': '殼', '课': '課', '垦': '墾', '恳': '懇', '夸': '誇',
  '块': '塊', '宽': '寬', '矿': '礦', '亏': '虧', '困': '睏', '扩': '擴', '腊': '臘', '蜡': '蠟',
  '来': '來', '兰': '蘭', '拦': '攔', '栏': '欄', '烂': '爛', '劳': '勞', '乐': '樂', '类': '類',
  '离': '離', '历': '歷', '丽': '麗', '励': '勵', '俩': '倆', '联': '聯', '帘': '簾', '脸': '臉',
  '练': '練', '粮': '糧', '两': '兩', '辆': '輛', '疗': '療', '辽': '遼', '了': '瞭', '猎': '獵',
  '临': '臨', '邻': '鄰', '灵': '靈', '岭': '嶺', '刘': '劉', '龙': '龍', '楼': '樓', '娄': '婁',
  '卢': '盧', '芦': '蘆', '炉': '爐', '陆': '陸', '录': '錄', '虑': '慮', '滤': '濾', '绿': '綠',
  '乱': '亂', '轮': '輪', '论': '論', '罗': '羅', '妈': '媽', '马': '馬', '买': '買', '卖': '賣',
  '迈': '邁', '麦': '麥', '满': '滿', '猫': '貓', '贸': '貿', '么': '麼', '没': '沒', '门': '門',
  '闷': '悶', '们': '們', '梦': '夢', '弥': '彌', '面': '麵', '庙': '廟', '灭': '滅', '鸣': '鳴',
  '铭': '銘', '谋': '謀', '亩': '畝', '难': '難', '恼': '惱', '脑': '腦', '拟': '擬', '酿': '釀',
  '鸟': '鳥', '聂': '聶', '宁': '寧', '农': '農', '诺': '諾', '欧': '歐', '盘': '盤', '庞': '龐',
  '赔': '賠', '喷': '噴', '鹏': '鵬', '骗': '騙', '飘': '飄', '频': '頻', '凭': '憑', '苹': '蘋',
  '评': '評', '扑': '撲', '铺': '鋪', '朴': '樸', '齐': '齊', '启': '啟', '气': '氣', '弃': '棄',
  '签': '簽', '钱': '錢', '潜': '潛', '浅': '淺', '枪': '槍', '墙': '牆', '强': '強', '抢': '搶',
  '桥': '橋', '窍': '竅', '亲': '親', '轻': '輕', '倾': '傾', '庆': '慶', '穷': '窮', '琼': '瓊',
  '秋': '鞦', '区': '區', '驱': '驅', '权': '權', '劝': '勸', '确': '確', '让': '讓', '扰': '擾',
  '热': '熱', '认': '認', '荣': '榮', '软': '軟', '锐': '銳', '润': '潤', '洒': '灑', '赛': '賽',
  '伞': '傘', '丧': '喪', '扫': '掃', '涩': '澀', '杀': '殺', '晒': '曬', '伤': '傷', '赏': '賞',
  '烧': '燒', '绍': '紹', '设': '設', '摄': '攝', '审': '審', '渗': '滲', '声': '聲', '胜': '勝',
  '圣': '聖', '师': '師', '狮': '獅', '湿': '濕', '诗': '詩', '时': '時', '实': '實', '识': '識',
  '势': '勢', '适': '適', '释': '釋', '寿': '壽', '兽': '獸', '书': '書', '术': '術', '树': '樹',
  '帅': '帥', '双': '雙', '谁': '誰', '顺': '順', '说': '說', '丝': '絲', '饲': '飼', '松': '鬆',
  '耸': '聳', '诵': '誦', '搜': '蒐', '苏': '蘇', '诉': '訴', '肃': '肅', '虽': '雖', '随': '隨',
  '岁': '歲', '孙': '孫', '损': '損', '缩': '縮', '锁': '鎖', '态': '態', '坛': '壇', '叹': '嘆',
  '汤': '湯', '烫': '燙', '涛': '濤', '讨': '討', '腾': '騰', '誊': '謄', '体': '體', '条': '條',
  '贴': '貼', '铁': '鐵', '厅': '廳', '听': '聽', '统': '統', '头': '頭', '图': '圖', '涂': '塗',
  '团': '團', '颓': '頹', '脱': '脫', '驮': '馱', '鸵': '鴕', '洼': '窪', '袜': '襪', '弯': '彎',
  '湾': '灣', '万': '萬', '网': '網', '为': '為', '韦': '韋', '围': '圍', '伟': '偉', '卫': '衛',
  '温': '溫', '闻': '聞', '稳': '穩', '问': '問', '涡': '渦', '乌': '烏', '无': '無', '务': '務',
  '误': '誤', '雾': '霧', '牺': '犧', '习': '習', '袭': '襲', '戏': '戲', '细': '細', '虾': '蝦',
  '吓': '嚇', '峡': '峽', '辖': '轄', '鲜': '鮮', '显': '顯', '险': '險', '县': '縣', '宪': '憲',
  '线': '線', '响': '響', '项': '項', '萧': '蕭', '销': '銷', '晓': '曉', '协': '協', '胁': '脅',
  '写': '寫', '泻': '瀉', '谢': '謝', '兴': '興', '须': '須', '许': '許', '叙': '敘', '绪': '緒',
  '续': '續', '轩': '軒', '悬': '懸', '选': '選', '学': '學', '勋': '勳', '询': '詢', '寻': '尋',
  '训': '訓', '讯': '訊', '压': '壓', '鸦': '鴉', '鸭': '鴨', '哑': '啞', '亚': '亞', '严': '嚴',
  '颜': '顏', '阎': '閻', '盐': '鹽', '验': '驗', '艳': '艷', '扬': '揚', '阳': '陽', '养': '養',
  '样': '樣', '尧': '堯', '摇': '搖', '谣': '謠', '药': '藥', '爷': '爺', '业': '業', '页': '頁',
  '叶': '葉', '医': '醫', '仪': '儀', '遗': '遺', '疑': '疑', '艺': '藝', '议': '議', '译': '譯',
  '异': '異', '阴': '陰', '银': '銀', '饮': '飲', '隐': '隱', '樱': '櫻', '应': '應', '营': '營',
  '蝇': '蠅', '赢': '贏', '颖': '穎', '拥': '擁', '佣': '傭', '踊': '踴', '优': '優', '忧': '憂',
  '邮': '郵', '犹': '猶', '游': '遊', '鱼': '魚', '渔': '漁', '与': '與', '屿': '嶼', '语': '語',
  '吁': '籲', '郁': '鬱', '誉': '譽', '预': '預', '驭': '馭', '鸳': '鴛', '渊': '淵', '园': '園',
  '员': '員', '圆': '圓', '远': '遠', '愿': '願', '约': '約', '跃': '躍', '钥': '鑰', '阅': '閱',
  '云': '雲', '运': '運', '酝': '醞', '杂': '雜', '灾': '災', '赞': '贊', '脏': '髒', '凿': '鑿',
  '枣': '棗', '责': '責', '择': '擇', '则': '則', '泽': '澤', '贼': '賊', '赠': '贈', '扎': '紮',
  '斋': '齋', '战': '戰', '占': '佔', '张': '張', '涨': '漲', '账': '賬', '赵': '趙', '这': '這',
  '针': '針', '侦': '偵', '诊': '診', '镇': '鎮', '阵': '陣', '争': '爭', '征': '徵', '症': '癥',
  '证': '證', '郑': '鄭', '织': '織', '执': '執', '职': '職', '纸': '紙', '质': '質', '滞': '滯',
  '钟': '鐘', '终': '終', '种': '種', '众': '眾', '周': '週', '昼': '晝', '朱': '硃', '烛': '燭',
  '筑': '築', '注': '註', '驻': '駐', '专': '專', '转': '轉', '庄': '莊', '装': '裝', '壮': '壯',
  '状': '狀', '准': '準', '浊': '濁', '资': '資', '综': '綜', '总': '總', '纵': '縱', '组': '組',
  '钻': '鑽', '罪': '罪', '尊': '尊', '昨': '昨', '左': '左', '作': '作', '坐': '坐', '座': '座'
}

// 生成繁转简映射
const TRADITIONAL_TO_SIMPLIFIED: Record<string, string> = {}
Object.entries(SIMPLIFIED_TO_TRADITIONAL).forEach(([s, t]) => {
  TRADITIONAL_TO_SIMPLIFIED[t] = s
})

function toTraditional(text: string): string {
  return text.split('').map(char => SIMPLIFIED_TO_TRADITIONAL[char] || char).join('')
}

function toSimplified(text: string): string {
  return text.split('').map(char => TRADITIONAL_TO_SIMPLIFIED[char] || char).join('')
}

export function ChineseConvertTool() {
  const [input, setInput] = useState('')
  const [output, setOutput] = useState('')
  const [mode, setMode] = useState<'s2t' | 't2s'>('s2t')
  const [copied, setCopied] = useState(false)

  const convert = () => {
    if (mode === 's2t') {
      setOutput(toTraditional(input))
    } else {
      setOutput(toSimplified(input))
    }
  }

  const swap = () => {
    setMode(mode === 's2t' ? 't2s' : 's2t')
    setInput(output)
    setOutput(input)
  }

  const handleCopy = async () => {
    await navigator.clipboard.writeText(output)
    setCopied(true)
    setTimeout(() => setCopied(false), 2000)
  }

  return (
    <div className="space-y-6">
      <div>
        <h2 className="text-xl font-semibold flex items-center gap-2">
          <Languages className="w-5 h-5" />
          繁简体转换
        </h2>
        <p className="text-sm text-muted-foreground">简体中文与繁体中文互转</p>
      </div>

      <div className="flex items-center justify-center gap-4">
        <span className={`text-sm font-medium ${mode === 's2t' ? 'text-primary' : 'text-muted-foreground'}`}>
          简体
        </span>
        <Button variant="outline" size="sm" onClick={swap}>
          <ArrowLeftRight className="w-4 h-4" />
        </Button>
        <span className={`text-sm font-medium ${mode === 't2s' ? 'text-primary' : 'text-muted-foreground'}`}>
          繁体
        </span>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
        <div className="space-y-2">
          <Label>{mode === 's2t' ? '简体中文' : '繁体中文'}</Label>
          <Textarea
            value={input}
            onChange={(e) => setInput(e.target.value)}
            placeholder={mode === 's2t' ? '输入简体中文...' : '輸入繁體中文...'}
            className="h-[250px] resize-none"
          />
        </div>

        <div className="space-y-2">
          <div className="flex items-center justify-between">
            <Label>{mode === 's2t' ? '繁体中文' : '简体中文'}</Label>
            <Button variant="ghost" size="sm" onClick={handleCopy} disabled={!output}>
              {copied ? <Check className="w-4 h-4 mr-1" /> : <Copy className="w-4 h-4 mr-1" />}
              {copied ? '已复制' : '复制'}
            </Button>
          </div>
          <Textarea
            value={output}
            readOnly
            placeholder="转换结果..."
            className="h-[250px] resize-none"
          />
        </div>
      </div>

      <Button onClick={convert} disabled={!input.trim()} className="w-full">
        {mode === 's2t' ? '转换为繁体' : '转换为简体'}
      </Button>
    </div>
  )
}
